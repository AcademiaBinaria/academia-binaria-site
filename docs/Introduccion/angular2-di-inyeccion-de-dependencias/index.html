<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Angular2 DI: Inyección de dependencias | Academia Binaria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Código asociado en angular2/4-injection/  AngularJS2 tiene vocación de framework para grandes aplicaciones de negocio. Los grandes desarrollos requieren modularidad en el código. En AngularJS se resu">
<meta name="keywords" content="Angular2">
<meta property="og:type" content="article">
<meta property="og:title" content="Angular2 DI: Inyección de dependencias">
<meta property="og:url" content="http://agorabinaria.com/academia-binaria-site/Introduccion/angular2-di-inyeccion-de-dependencias/index.html">
<meta property="og:site_name" content="Academia Binaria">
<meta property="og:description" content="Código asociado en angular2/4-injection/  AngularJS2 tiene vocación de framework para grandes aplicaciones de negocio. Los grandes desarrollos requieren modularidad en el código. En AngularJS se resu">
<meta property="og:locale" content="es">
<meta property="og:image" content="http://agorabinaria.com/images/ng2-Component-DataFlow.jpg">
<meta property="og:image" content="http://agorabinaria.com/images/ng2-DI-component-service.jpg">
<meta property="og:image" content="http://agorabinaria.com/images/ng2-DI-component-directive.jpg">
<meta property="og:image" content="http://agorabinaria.com/images/ng2-Arbol-de-dependencias.jpg">
<meta property="og:updated_time" content="2016-11-10T13:52:13.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Angular2 DI: Inyección de dependencias">
<meta name="twitter:description" content="Código asociado en angular2/4-injection/  AngularJS2 tiene vocación de framework para grandes aplicaciones de negocio. Los grandes desarrollos requieren modularidad en el código. En AngularJS se resu">
<meta name="twitter:image" content="http://agorabinaria.com/images/ng2-Component-DataFlow.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Academia Binaria" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/academia-binaria-site/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/academia-binaria-site/" id="logo">Academia Binaria</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/academia-binaria-site/" id="subtitle">Formación en español para programadores</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/academia-binaria-site/">Home</a>
        
          <a class="main-nav-link" href="/academia-binaria-site/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Buscar"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://agorabinaria.com/academia-binaria-site"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-angular2-di-inyeccion-de-dependencias" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/academia-binaria-site/Introduccion/angular2-di-inyeccion-de-dependencias/" class="article-date">
  <time datetime="2016-05-30T09:09:09.000Z" itemprop="datePublished">2016-05-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/academia-binaria-site/categories/Introduccion/">Introducción</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Angular2 DI: Inyección de dependencias
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Código asociado en <a href="https://github.com/AcademiaBinaria/angular2/tree/master/4-injection" target="_blank" rel="external">angular2/4-injection/</a></p>
</blockquote>
<p>AngularJS2 tiene vocación de <em>framework</em> para grandes aplicaciones de negocio. Los grandes desarrollos requieren <strong>modularidad en el código</strong>. En AngularJS se resuelve mediante la Inyección de Dependencias, siguiendo el conocido patrón <em><a href="https://es.wikipedia.org/wiki/Inyecci%C3%B3n_de_dependencias" target="_blank" rel="external">Dependency Injection</a></em>. </p>
<p>Los cambios en la versión 2 son sobre todo sintácticos, pero también conceptuales. Se mantiene el mismo objetivo, permitir hacer <strong>aplicaciones de negocio con HTML y JavaScript</strong> de manera controlable.</p>
<h2 id="Modulos-componentes-y-servicios"><a href="#Modulos-componentes-y-servicios" class="headerlink" title="Módulos, componentes y servicios"></a>Módulos, componentes y servicios</h2><p>En AngularJS 1 teníamos muy presente el concepto de <strong>módulo</strong>. Rara era la aplicación que no comenzase con el mítico <code>angular.module(&#39;miAplicacion&#39;)</code>. Dada la carencia de un sistema modular nativo en <em>JavaScript</em>, AngularJS nos proveía de uno propio. </p>
<p>Hoy en día se nos sugiere que usemos las versiones avanzadas de <em>JS</em>, o mejor aún <em>TypeScript</em>. Estos lenguajes nos ofrecen las instrucciones <code>export</code> e <code>import</code> que permiten definir <strong>módulos estancos en ficheros</strong> independientes. Nunca más el engorroso envolvimiento <em>IIFE</em> <code>(function () { … }())</code>.</p>
<p>A partir de ahí es el programador el que selectivamente <strong>exporta funcionalidad que importará para ser consumida</strong> mas tarde. De este modo, Angular se desentiende de la creación de módulos de código y se centra en la comunicación entre los objetos que componen la aplicación.</p>
<h3 id="Componentes"><a href="#Componentes" class="headerlink" title="Componentes"></a>Componentes</h3><p>Son los bloques de construcción agrupables en compuestos que forman la interfaz visual de una aplicación. Encapsulan <strong>la vista, los datos y la lógica</strong> para interactuar con el usuario. </p>
<p>Ni la vista ni la lógica deben crecer y realizar tareas que no sean de su exclusiva capa de responsabilidad. Esas tareas debe ser delegadas en otros objetos. </p>
<blockquote>
<p>Modelo de composición de componentes visuales para crear vistas complejas. La comunicación o <a href="../databinding-el-flujo-de-datos-de-angular2/">Data Flow</a> se realiza de manera declarativa. Enviando datos a las propiedades de los hijos y esperando eventos con respuestas.</p>
</blockquote>
<p><img src="/images/ng2-Component-DataFlow.jpg" alt="Composición mediante componentes"></p>
<h3 id="Servicios"><a href="#Servicios" class="headerlink" title="Servicios"></a>Servicios</h3><p>Los servicios serán <strong>objetos especializados y reutilizables</strong> por otros servicios y componentes. En su definición debes aplicar los mismos principios de arquitectura de software que ya conoces y aplicas en <em>lenguajes clásicos tipo Java o C#.net</em>.</p>
<p>La sintaxis de la comunicación involucra varios bloques en ambos lados del canal: </p>
<ul>
<li>la definición del servicio decorado como <code>@Injectable()</code> en el proveedor, </li>
<li>la exportación en el proveedor y la importación en el consumidor, </li>
<li>el registro en el array <code>providers:[]</code> del componente consumidor (o mejor del módulo) conumidor y </li>
<li>el consumo en el constructor del componente o servicio consumidor.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</div><div class="line"><span class="keyword">import</span> &#123; MovimientosService, Movimiento &#125; <span class="keyword">from</span> <span class="string">'../shared/'</span>;</div><div class="line">@Component(&#123;</div><div class="line">  selector: <span class="string">'movimiento'</span>,</div><div class="line">  templateUrl: <span class="string">'movimiento.component.html'</span>,</div><div class="line">  providers: [MovimientosService] </div><div class="line">&#125;)</div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">MovimientoComponent</span> </span>&#123;</div><div class="line">  movimiento: Movimiento</div><div class="line">  <span class="keyword">constructor</span>(public movimientosService: MovimientosService) &#123; &#125;</div><div class="line">  guardarMovimiento() &#123;</div><div class="line">    <span class="keyword">this</span>.movimientosService.guardarMovimiento(<span class="keyword">this</span>.movimiento)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/images/ng2-DI-component-service.jpg" alt="Inyección de servicios en componentes "></p>
<h3 id="Directivas"><a href="#Directivas" class="headerlink" title="Directivas"></a>Directivas</h3><p>Las directivas eran el ADN de AngularJS1. Ahora han mutado en <strong>componentes reutilizables</strong> como elementos en las vistas de otros componentes de rango superior. Pero la idea es la misma, desglosar las plantillas de HTML en bloques con un propósito único. </p>
<p>La sintaxis de las directivas es similar: </p>
<ul>
<li>la definición del servicio decorado como <code>@Injectable()</code> en el componente hijo, </li>
<li>la exportación del hijo y la importación en el padre, </li>
<li>el registro en el array <code>directives:[]</code> del componente padre (o del módulo padre) y </li>
<li>el consumo declarativo en la plantilla de la vista padre.</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Component &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</div><div class="line"><span class="keyword">import</span> &#123; MovimientoComponent &#125; <span class="keyword">from</span> <span class="string">'./movimiento'</span>;</div><div class="line">@Component(&#123;</div><div class="line">  selector: <span class="string">'injection-app'</span>,</div><div class="line">  template: <span class="string">'&lt;h1&gt;</span></div><div class="line"><span class="string">              &#123;&#123;titulo&#125;&#125;</span></div><div class="line"><span class="string">            &lt;/h1&gt;</span></div><div class="line"><span class="string">            &lt;movimiento&gt;&lt;/movimiento&gt;'</span>,</div><div class="line">  directives:[MovimientoComponent]</div><div class="line">&#125;)</div><div class="line"><span class="keyword">export</span> <span class="class"><span class="keyword">class</span> <span class="title">InjectionAppComponent</span> </span>&#123;</div><div class="line">  titulo = <span class="string">'Inyectores listos!'</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><img src="/images/ng2-DI-component-directive.jpg" alt="Inyección de directivas en componentes"></p>
<h2 id="Registro"><a href="#Registro" class="headerlink" title="Registro"></a>Registro</h2><p>La inyección de las dependencias <strong>funciona de manera jerárquica</strong> en AngularJS 2. Cuando un módulo registra una dependencia la pone a disposición de todos sus componentes hijos. Es más, si algún hijo la volviese a registrar se le proveería de otra instancia. </p>
<p>Esta copia puede provocar efectos colaterales indeseados. Para <strong>compartir datos</strong> o ahorrar memoria se recomienda registrar las dependencias lo más arriba posible. Esto siempre sin sacrificar la modularidad o la escalabilidad de aplicaciones que requieran <em>lazy loading</em>.</p>
<blockquote>
<p>Atención a la copia de <em>routeService</em> que se registra por segunda vez. No importa que ya la haya registrado su padre. Otro registro implica otra instancia.</p>
</blockquote>
<p><img src="/images/ng2-Arbol-de-dependencias.jpg" alt="Jerarquía de dependencias en AngularJS"></p>
<p>Para ciertos casos, AngularJS 2 permite modelos de inyección más avanzados. Mediante el uso de <strong>factorías y el registro de cadenas</strong> con los nombres de los servicios facilita la inyección a voluntad o la carga diferida.</p>
<blockquote>
<p>Algunas de estas posibilidades están siendo retocadas durante la actual <em>Release Candidate</em>, y se esperan cambios de cara a las próxima versión estable.</p>
</blockquote>
<p>El viejo principio de <em>divide y vencerás</em> se aplica rotundamente en las aplicaciones Angular 2. Si creas <strong>módulos reutilizables</strong> estarás sentando las bases para crear grandes aplicaciones de negocio con AngularJS.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://agorabinaria.com/academia-binaria-site/Introduccion/angular2-di-inyeccion-de-dependencias/" data-id="cj976gtxp002cq4jsf9ypcomi" class="article-share-link">Compartir</a>
      
        <a href="http://agorabinaria.com/academia-binaria-site/Introduccion/angular2-di-inyeccion-de-dependencias/#disqus_thread" class="article-comment-link">Comentarios</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/academia-binaria-site/tags/Angular2/">Angular2</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/academia-binaria-site/Introduccion/enrutado-con-angular2-el-nuevo-spa/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Reciente</strong>
      <div class="article-nav-title">
        
          Enrutador de componentes con Angular2 el nuevo SPA
        
      </div>
    </a>
  
  
    <a href="/academia-binaria-site/Introduccion/databinding-el-flujo-de-datos-de-angular2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Antiguo</strong>
      <div class="article-nav-title">DataBinding el flujo de datos de Angular2</div>
    </a>
  
</nav>

  
</article>


<section id="comments">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>
</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categorías</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/academia-binaria-site/categories/Avanzado/">Avanzado</a></li><li class="category-list-item"><a class="category-list-link" href="/academia-binaria-site/categories/Introduccion/">Introducción</a></li><li class="category-list-item"><a class="category-list-link" href="/academia-binaria-site/categories/Opinion/">Opinión</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Etiquetas</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/Angular2/">Angular2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/AngularJS/">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/BackEnd/">BackEnd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/Bootstrap/">Bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/FrontEnd/">FrontEnd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/MongoDB/">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/NodeJS/">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/academia-binaria-site/tags/TypeScript/">TypeScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nube de etiquetas</h3>
    <div class="widget tagcloud">
      <a href="/academia-binaria-site/tags/Angular2/" style="font-size: 20px;">Angular2</a> <a href="/academia-binaria-site/tags/AngularJS/" style="font-size: 15px;">AngularJS</a> <a href="/academia-binaria-site/tags/BackEnd/" style="font-size: 10px;">BackEnd</a> <a href="/academia-binaria-site/tags/Bootstrap/" style="font-size: 12.5px;">Bootstrap</a> <a href="/academia-binaria-site/tags/FrontEnd/" style="font-size: 10px;">FrontEnd</a> <a href="/academia-binaria-site/tags/MongoDB/" style="font-size: 12.5px;">MongoDB</a> <a href="/academia-binaria-site/tags/NodeJS/" style="font-size: 17.5px;">NodeJS</a> <a href="/academia-binaria-site/tags/TypeScript/" style="font-size: 10px;">TypeScript</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archivos</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2017/10/">octubre 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2017/03/">marzo 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/09/">septiembre 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/06/">junio 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/05/">mayo 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/04/">abril 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/03/">marzo 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2016/01/">enero 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2015/11/">noviembre 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/academia-binaria-site/archives/2015/08/">agosto 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Artículos recientes</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/academia-binaria-site/uncategorized/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/academia-binaria-site/Opinion/typescript-programa-en-el-front-igual-que-en-el-back/">TypeScript, programa en el front igual que en el back</a>
          </li>
        
          <li>
            <a href="/academia-binaria-site/Introduccion/codigo-de-ejemplo-curso-de-angular2/">Código de ejemplo curso de Angular2</a>
          </li>
        
          <li>
            <a href="/academia-binaria-site/Introduccion/formularios-de-datos-en-angular2/">Formularios de datos en Angular2</a>
          </li>
        
          <li>
            <a href="/academia-binaria-site/Introduccion/comunicaciones-http-observables-con-angular2/">Comunicaciones http observables con Angular2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
        <div class="outer">
          <div id="footer-info"
               class="inner">
            &copy;
            2017
              Alberto Basalo
                <br>
                Hecho por
                  <a href="http://hexo.io/"
                     target="_blank">Hexo</a>
          </div>
        </div>
        
          <script>
            var disqus_shortname = 'academiabinaria';
      
      var disqus_url = 'http://agorabinaria.com/academia-binaria-site/cookies.html';
      
              (function () {
                var dsq = document.createElement('script');
                dsq.type = 'text/javascript';
                dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
          </script>
          
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/academia-binaria-site/" class="mobile-nav-link">Home</a>
  
    <a href="/academia-binaria-site/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'academiabinaria';
  
  var disqus_url = 'http://agorabinaria.com/academia-binaria-site/Introduccion/angular2-di-inyeccion-de-dependencias/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/academia-binaria-site/fancybox/jquery.fancybox.css">
  <script src="/academia-binaria-site/fancybox/jquery.fancybox.pack.js"></script>


<script src="/academia-binaria-site/js/script.js"></script>

  </div>
</body>
</html>