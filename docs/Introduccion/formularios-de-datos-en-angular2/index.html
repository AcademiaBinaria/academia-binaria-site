<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Formularios de datos en Angular2 | Academia Binaria</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Los formularios en AngularJS fueron un éxito inicial debido entre otras coas al double binding. Otra cosa que no fue nunca simple es la validación de controles en los formualrios. En Angular 2 y con l">
<meta name="keywords" content="Angular2">
<meta property="og:type" content="article">
<meta property="og:title" content="Formularios de datos en Angular2">
<meta property="og:url" content="http://academia-binaria.com/Introduccion/formularios-de-datos-en-angular2/index.html">
<meta property="og:site_name" content="Academia Binaria">
<meta property="og:description" content="Los formularios en AngularJS fueron un éxito inicial debido entre otras coas al double binding. Otra cosa que no fue nunca simple es la validación de controles en los formualrios. En Angular 2 y con l">
<meta property="og:locale" content="es">
<meta property="og:updated_time" content="2016-06-22T16:05:58.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Formularios de datos en Angular2">
<meta name="twitter:description" content="Los formularios en AngularJS fueron un éxito inicial debido entre otras coas al double binding. Otra cosa que no fue nunca simple es la validación de controles en los formualrios. En Angular 2 y con l">
  
    <link rel="alternate" href="/atom.xml" title="Academia Binaria" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Academia Binaria</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Formación en enspañol para programadores</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://academia-binaria.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-formularios-de-datos-en-angular2" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/Introduccion/formularios-de-datos-en-angular2/" class="article-date">
  <time datetime="2016-06-22T14:32:34.000Z" itemprop="datePublished">2016-06-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Introduccion/">Introducción</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Formularios de datos en Angular2
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Los formularios en AngularJS fueron un éxito inicial debido entre otras coas al <em>double binding</em>. Otra cosa que no fue nunca simple es la <strong>validación de controles en los formualrios</strong>. En Angular 2 y con la última versión RC3 la cosa mejora, pero es aún un <em>Work in progress.</em></p>
<h3 id="Dependencias"><a href="#Dependencias" class="headerlink" title="Dependencias"></a>Dependencias</h3><p>Con el lío de versiones de los últimos días, conviene que os muestre con qué he hecho mi prueba.<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">"dependencies": &#123;</div><div class="line">    "@angular/common": "2.0.0-rc.3",</div><div class="line">    "@angular/compiler": "2.0.0-rc.3",</div><div class="line">    "@angular/core": "2.0.0-rc.3",</div><div class="line">    "@angular/forms": "^0.1.1",</div><div class="line">    "@angular/http": "2.0.0-rc.3",</div><div class="line">    "@angular/platform-browser": "2.0.0-rc.3",</div><div class="line">    "@angular/platform-browser-dynamic": "2.0.0-rc.3",</div><div class="line">    "@angular/router": "3.0.0-alpha.7",</div><div class="line">    "es6-shim": "^0.35.0",</div><div class="line">    "reflect-metadata": "0.1.3",</div><div class="line">    "rxjs": "5.0.0-beta.6",</div><div class="line">    "systemjs": "0.19.26",</div><div class="line">    "zone.js": "^0.6.12"</div><div class="line">  &#125;</div></pre></td></tr></table></figure></p>
<p>Como veis están actualizadas a la <code>RC.3</code> y <code>forms 0.1.1</code>.</p>
<blockquote>
<p>Si usas <strong>SystemJS</strong>, acuérdate de incluir <code>@angular/forms</code> en el fichero <code>system-config.json</code></p>
</blockquote>
<p>En el <code>main.ts</code> debemos registrar los <em>providers</em> que permiten la convivencia de la actual versión de <em>forms</em> y la anterior (de la semana pasada) ya obsoleta.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; disableDeprecatedForms, provideForms &#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</div><div class="line">bootstrap(CashFlowAppComponent,[</div><div class="line">  disableDeprecatedForms(),</div><div class="line">  provideForms()</div><div class="line">]);</div></pre></td></tr></table></figure>
<h3 id="Plantillas-html-para-hacer-formularios"><a href="#Plantillas-html-para-hacer-formularios" class="headerlink" title="Plantillas html para hacer formularios"></a>Plantillas html para hacer formularios</h3><p>Vamos a tratar de mantener el <strong>html limpio</strong> hasta dónde sea posible. En un futuro espero que incluso sea prescindible y que se pueda generar de forma automática a partir de datos de configuración.<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">form</span> [<span class="attr">formGroup</span>]=<span class="string">"formularioMovimiento"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Tipo:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">formControlName</span>=<span class="string">"tipo"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> *<span class="attr">ngIf</span>=<span class="string">"formularioMovimiento.controls['tipo'].touched &amp;&amp; !formularioMovimiento.controls['tipo'].valid"</span>&gt;</span></div><div class="line">      Necesitamos el tipo de movimiento</div><div class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Categoría:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">formControlName</span>=<span class="string">"categoria"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Fecha:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"date"</span> <span class="attr">formControlName</span>=<span class="string">"fecha"</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">label</span>&gt;</span>Importe:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"number"</span> <span class="attr">formControlName</span>=<span class="string">"importe"</span>&gt;</span> <span class="tag">&lt;<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">span</span> *<span class="attr">ngIf</span>=<span class="string">"formularioMovimiento.controls['importe'].touched &amp;&amp; !formularioMovimiento.controls['importe'].valid"</span>&gt;</span></div><div class="line">      Necesitamos el tipo de movimiento</div><div class="line">    <span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">button</span> </span></div><div class="line"><span class="tag">    <span class="attr">type</span>=<span class="string">"submit"</span> </span></div><div class="line"><span class="tag">    [<span class="attr">disabled</span>]=<span class="string">"!formularioMovimiento.valid"</span></span></div><div class="line"><span class="tag">    (<span class="attr">click</span>)=<span class="string">"guardarMovimiento()"</span> &gt;</span>Guardar</div><div class="line">  <span class="tag">&lt;/<span class="name">button</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>Se incluyen la lógica para mostrar mensajes de validación y activación del botón de guardado. He optado por no usar la definción de variables en la plantilla mediante <code>#</code>.</p>
<h3 id="Logica-y-datos-en-el-componente"><a href="#Logica-y-datos-en-el-componente" class="headerlink" title="Lógica y datos en el componente"></a>Lógica y datos en el componente</h3><p>Trataremos de llevar la <strong>lógica de generación y validación de datos</strong> al componente y programarlo en TypeScript. Puede ser por mi pasado <em>backender</em> pero me encuentro más cómodo cuanto más lejos de un lenguaje de marcas.</p>
<p>Para empezar necesitamos registrar las herramientas. El proveedor <code>FormBuilder</code> nos ayuda a definir los controles asociados al formulario y sus validaciones.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; REACTIVE_FORM_DIRECTIVES, FormBuilder, FormGroup, Validators  &#125; <span class="keyword">from</span> <span class="string">'@angular/forms'</span>;</div><div class="line">@Component(&#123;</div><div class="line">  directives: [REACTIVE_FORM_DIRECTIVES],</div><div class="line">  providers:[FormBuilder]</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>En el evento <code>OnInit</code> construimos la estructura de soporte al formulario. Se puede hacer mucho más compleja, mediante la inclusión de grupos de controles anidados.</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">ngOnInit() &#123;</div><div class="line">    <span class="keyword">this</span>.formularioMovimiento = <span class="keyword">this</span>.formBuilder.group(&#123;</div><div class="line">      tipo: [<span class="string">''</span>,Validators.required],</div><div class="line">      categoria: [],</div><div class="line">      fecha: [],</div><div class="line">      importe:[<span class="string">''</span>,Validators.required]</div><div class="line">    &#125;);</div><div class="line">  &#125;</div></pre></td></tr></table></figure>
<p>Antes de enviar datos a un serviciop se pueden hacer validaciones y ttransformacipnes previas. El acceso a los valores del formulario se hace través de su propiedad <code>.value</code>. Con esto ya realizaremos los envíos a los servicios…</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">guardarMovimiento() &#123;       </div><div class="line"> <span class="keyword">this</span>.miServicio.Guardar(<span class="keyword">this</span>.formularioMovimiento.value);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Validacion"><a href="#Validacion" class="headerlink" title="Validación"></a>Validación</h3><p>La validación temprana es el objetivo fundamental de un desarrollo de formularios. Es buena para el usuario y buena para el sistema. Angular2 facilita la implementación de las validaciones estándar y permite la creación de las tuyas propias.</p>
<p>Lo veremos en próximas entregas. Sígueme en <a href="https://twitter.com/albertobasalo" target="_blank" rel="external">mi cuenta de twitter</a> o suscríbete a la <a href="http://academia-binaria.us4.list-manage.com/subscribe?u=c8ad2d2e7d02c26e32ce4cded&amp;id=b67e4d2339" target="_blank" rel="external">revista mensual de Academia Binaria</a> y serás el primero en ser informado.</p>
<p><em>Keep coding, keep learning.</em></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://academia-binaria.com/Introduccion/formularios-de-datos-en-angular2/" data-id="cj976gty1002oq4jsnbrracxl" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Angular2/">Angular2</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/Introduccion/codigo-de-ejemplo-curso-de-angular2/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          Código de ejemplo curso de Angular2
        
      </div>
    </a>
  
  
    <a href="/Introduccion/comunicaciones-http-observables-con-angular2/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">Comunicaciones http observables con Angular2</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Avanzado/">Avanzado</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Introduccion/">Introducción</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Opinion/">Opinión</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Angular2/">Angular2</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/AngularJS/">AngularJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/BackEnd/">BackEnd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Bootstrap/">Bootstrap</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/FrontEnd/">FrontEnd</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MongoDB/">MongoDB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NodeJS/">NodeJS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TypeScript/">TypeScript</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/Angular2/" style="font-size: 20px;">Angular2</a> <a href="/tags/AngularJS/" style="font-size: 15px;">AngularJS</a> <a href="/tags/BackEnd/" style="font-size: 10px;">BackEnd</a> <a href="/tags/Bootstrap/" style="font-size: 12.5px;">Bootstrap</a> <a href="/tags/FrontEnd/" style="font-size: 10px;">FrontEnd</a> <a href="/tags/MongoDB/" style="font-size: 12.5px;">MongoDB</a> <a href="/tags/NodeJS/" style="font-size: 17.5px;">NodeJS</a> <a href="/tags/TypeScript/" style="font-size: 10px;">TypeScript</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">octubre 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">marzo 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">septiembre 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">junio 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">mayo 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">abril 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">marzo 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">enero 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">noviembre 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">agosto 2015</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/uncategorized/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/Opinion/typescript-programa-en-el-front-igual-que-en-el-back/">TypeScript, programa en el front igual que en el back</a>
          </li>
        
          <li>
            <a href="/Introduccion/codigo-de-ejemplo-curso-de-angular2/">Código de ejemplo curso de Angular2</a>
          </li>
        
          <li>
            <a href="/Introduccion/formularios-de-datos-en-angular2/">Formularios de datos en Angular2</a>
          </li>
        
          <li>
            <a href="/Introduccion/comunicaciones-http-observables-con-angular2/">Comunicaciones http observables con Angular2</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 Alberto Basalo<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>