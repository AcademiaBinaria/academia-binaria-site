<!DOCTYPE html><html lang="es"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><title>Comunicaciones http en Angular | Academia Binaria</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Las comunicaciones http son una pieza fundamental del desarrollo web, y en Angular siempre han sido potentes y fáciles. ¿Siempre?, bueno cuando apareció Angular 2 echábamos en falta algunas cosillas…"><meta name="keywords" content="Angular2,Tutorial,http,Angular,Introducción,Observables,RxJS,Angular7"><meta property="og:type" content="article"><meta property="og:title" content="Comunicaciones http en Angular"><meta property="og:url" content="https://academia-binaria.com/comunicaciones-http-en-Angular/index.html"><meta property="og:site_name" content="Academia Binaria"><meta property="og:description" content="Las comunicaciones http son una pieza fundamental del desarrollo web, y en Angular siempre han sido potentes y fáciles. ¿Siempre?, bueno cuando apareció Angular 2 echábamos en falta algunas cosillas…"><meta property="og:locale" content="es"><meta property="og:image" content="https://academia-binaria.com/css/images/angular-6_http.png"><meta property="og:updated_time" content="2019-03-20T16:11:09.812Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Comunicaciones http en Angular"><meta name="twitter:description" content="Las comunicaciones http son una pieza fundamental del desarrollo web, y en Angular siempre han sido potentes y fáciles. ¿Siempre?, bueno cuando apareció Angular 2 echábamos en falta algunas cosillas…"><meta name="twitter:image" content="https://academia-binaria.com/css/images/angular-6_http.png"><link rel="alternate" href="http://eepurl.com/b3p7fb" title="Academia Binaria" type="application/atom+xml"><link rel="icon" href="/css/images/favicon.ico"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/open-sans/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.1.3/jquery.min.js"></script><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-66674029-1","auto"),ga("send","pageview")</script></head></html><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><i class="logo"></i> <span class="site-title">Academia Binaria</span></a><nav id="main-nav"><a class="main-nav-link" href="/cursos">Cursos Online</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8"> <i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="escribe..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Entradas",PAGES:"Páginas",CATEGORIES:"Categorias",TAGS:"Etiquetas",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/cursos">Cursos Online</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8?s=128"><h2 id="name">Alberto Basalo</h2><h3 id="title">Formador y Consultor</h3><span id="location"><i class="fa fa-map-marker"></i>A Coruña, Spain</span> <a id="follow" target="_blank" href="https://twitter.com/albertobasalo">SEGUIR</a></div><div class="article-info profile-block"><div class="article-info-block"><a target="_blank" href="https://www.trainingit.es/curso-angular-basico/?promo=meetup10&af=abasalo">Basic</a></div><div class="article-info-block"><a target="_blank" href="https://www.trainingit.es/curso-angular-alto-rendimiento/?promo=meetup10&af=abasalo/">Bravo</a></div></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/AcademiaBinaria" target="_blank" title="github" class="tooltip"><i class="fa fa-github"></i></a></td><td><a href="https://twitter.com/albertobasalo" target="_blank" title="twitter" class="tooltip"><i class="fa fa-twitter"></i></a></td><td><a href="https://www.facebook.com/Agora.Binaria.SL/" target="_blank" title="facebook" class="tooltip"><i class="fa fa-facebook"></i></a></td><td><a href="http://eepurl.com/b3p7fb" target="_blank" title="rss" class="tooltip"><i class="fa fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article id="post-comunicaciones-http-en-Angular" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Comunicaciones http en Angular</h1><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/comunicaciones-http-en-Angular/"><time datetime="2019-02-28T13:06:00.000Z" itemprop="datePublished">28-02-2019</time></a></div><div class="article-category"><i class="fa fa-folder"></i> <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tag/Angular/">Angular</a>, <a class="tag-link" href="/tag/Angular2/">Angular2</a>, <a class="tag-link" href="/tag/Angular7/">Angular7</a>, <a class="tag-link" href="/tag/Introduccion/">Introducción</a>, <a class="tag-link" href="/tag/Observables/">Observables</a>, <a class="tag-link" href="/tag/RxJS/">RxJS</a>, <a class="tag-link" href="/tag/Tutorial/">Tutorial</a>, <a class="tag-link" href="/tag/http/">http</a></div></div></header><div class="article-entry" itemprop="articleBody"><p><img src="/images/tutorial-angular-6_http.png" alt="comunicaciones-http-en-Angular"></p><p>Las comunicaciones <em>http</em> son una pieza fundamental del desarrollo web, y en <strong>Angular</strong> siempre han sido potentes y fáciles. ¿Siempre?, bueno cuando apareció Angular 2 echábamos en falta algunas cosillas… y además la librería <em>RxJS</em> y sus <em>streams</em> son intimidantes para los novatos.</p><p>Pero en la versión Angular 7 <strong>consumir un servicio REST</strong> puede ser cosa de niños si aprendes a jugar con los <em>observables</em> y los servicios de la librería <code>@angular/common/http</code>. Conseguirás realizar <strong>comunicaciones http asíncronas en Angular</strong>.</p><a id="more"></a><p>Partiendo de la aplicación tal cómo quedó en <a href="../servicios-inyectables-en-Angular/">Servicios inyectables en Angular</a>. Al finalizar tendrás una aplicación que almacena y recupera los datos consumiendo un servicio REST usando las tecnologías de Angular Http.</p><blockquote><p>Código asociado a este artículo en <em>GitHub</em>: <a href="https://github.com/AcademiaBinaria/angular-basic/tree/master/src/app/6-http/rates" target="_blank" rel="noopener">AcademiaBinaria/angular-basic/6-http</a></p><blockquote><p>Tienes una versión desplegada operativa para probar <a href="https://academiabinaria.github.io/angular-basic/" target="_blank" rel="noopener">Angular Board</a></p></blockquote></blockquote><h1 id="1-El-servicio-HttpClient"><a href="#1-El-servicio-HttpClient" class="headerlink" title="1. El servicio HttpClient"></a>1. El servicio HttpClient</h1><p>Como demostración vamos a consumir un API pública con datos de <a href="https://exchangeratesapi.io/" target="_blank" rel="noopener">cotización de monedas</a>. Crearé un módulo y un componente en el que visualizar las divisas y después las transformaremos para guardarlas en un servicio propio.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ng g m 6-http/rates --routing true</span><br><span class="line">ng g c 6-http/rates/rates</span><br></pre></td></tr></table></figure><h2 id="1-1-Importacion-y-declaracion-de-servicios"><a href="#1-1-Importacion-y-declaracion-de-servicios" class="headerlink" title="1.1 Importación y declaración de servicios"></a>1.1 Importación y declaración de servicios</h2><p>La librería <code>@angular/common/http</code> trae el módulo <code>HttpClientModule</code> con el servicio inyectable <code>HttpClient</code>. Lo primero es importar dicho módulo.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HttpClientModule &#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@NgModule</span>(&#123;</span><br><span class="line">  declarations: [RatesComponent],</span><br><span class="line">  imports: [HttpClientModule]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> RatesModule &#123; &#125;</span><br></pre></td></tr></table></figure><p>En tu componente tienes que reclamar la dependencia al servicio para poder usarla. Atención a la importación pues hay más clases con el nombre <code>HttpClient</code>. Debe quedar algo así:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HttpClient &#125; <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Component</span>(&#123;</span><br><span class="line">  selector: <span class="string">'app-rates'</span>,</span><br><span class="line">  templateUrl: <span class="string">'./rates.component.html'</span>,</span><br><span class="line">  styles: []</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> RatesComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> httpClient: HttpClient</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>A partir de este momento sólo queda invocar los métodos REST en la propiedad <code>this.http</code>.</p><h2 id="1-2-Obtencion-de-datos"><a href="#1-2-Obtencion-de-datos" class="headerlink" title="1.2 Obtención de datos"></a>1.2 Obtención de datos</h2><p>Para cada verbo <em>http</em> tenemos su método en el servicio <code>HttpClient</code>. Su primer parámetro será la <em>url</em> a la que invocar. Empecemos por el <code>get</code> que automáticamente solicita y devuelve objetos <em>JSON</em> desde un API. Por ejemplo para obtener <a href="https://api.exchangeratesapi.io/latest?symbols=USD,GBP,CHF,JPY" target="_blank" rel="noopener">las últimas cotizaciones de las principales divisas</a> lo haremos así:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> RatesComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  <span class="keyword">private</span> urlapi</span><br><span class="line">    = <span class="string">'https://api.exchangeratesapi.io/latest'</span>;</span><br><span class="line">  <span class="keyword">public</span> currentEuroRates: <span class="built_in">any</span> = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> httpClient: HttpClient</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  ngOnInit() &#123;</span><br><span class="line">    <span class="keyword">this</span>.getCurrentEuroRates();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> getCurrentEuroRates() &#123;</span><br><span class="line">    <span class="keyword">const</span> currencies = <span class="string">'USD,GBP,CHF,JPY'</span>;</span><br><span class="line">    <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;this.urlapi&#125;</span>?symbols=<span class="subst">$&#123;currencies&#125;</span>`</span>;</span><br><span class="line">    <span class="keyword">this</span>.httpClient</span><br><span class="line">      .get(url)</span><br><span class="line">      .subscribe(<span class="function"><span class="params">apiData</span> =&gt;</span> (<span class="keyword">this</span>.currentEuroRates = apiData));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>El método <em>get</em> retorna un objeto observable. Los observables <em>http</em> han de consumirse mediante el método <em>subscribe</em> para que realmente se lancen. Dicho método <em>subscribe</em> admite hasta tres <em>callbacks</em>: <code>susbcribe(data, err, end)</code> para que se ejecuten en respuesta a eventos. En este ejemplo solo hemos usado el primero.</p></blockquote><p>La presentación en la vista sólo tiene que acceder a la propiedad dónde se hayan cargado las respuestas tratadas en el <em>callback</em> de la suscripción.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span> Currency Rates. <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span> From Euro to the world <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; currentEuroRates | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-3-Envio-de-datos"><a href="#1-3-Envio-de-datos" class="headerlink" title="1.3 Envío de datos"></a>1.3 Envío de datos</h2><p>Supongamos que, una vez recibidas las cotizaciones, pretendemos transformarlas y almacenarlas en otro servicio. El envío en este caso será con el método <em>post</em> al que se le pasará la ruta del <em>end point</em> y el objeto <em>payload</em> que se enviará al servidor.</p><p>Vamos a agregar una propiedad y un par de métodos al <code>rates-component.ts</code>. La idea es obtener un array de cotizaciones aa partir del objeto previo, y guardarla una por una.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> RatesComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line">  <span class="keyword">private</span> myRatesApi</span><br><span class="line">    = <span class="string">'https://api-base.herokuapp.com/api/pub/rates'</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> postRates() &#123;</span><br><span class="line">    <span class="keyword">const</span> rates = <span class="keyword">this</span>.transformData();</span><br><span class="line">    rates.forEach(<span class="function"><span class="params">rate</span> =&gt;</span></span><br><span class="line">      <span class="keyword">this</span>.httpClient</span><br><span class="line">        .post(<span class="keyword">this</span>.myRatesApi, rate)</span><br><span class="line">        .subscribe()</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> transformData() &#123;</span><br><span class="line">    <span class="keyword">const</span> current = <span class="keyword">this</span>.currentEuroRates.rates;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Object</span>.keys(current).map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123;</span><br><span class="line">      date: <span class="keyword">this</span>.currentEuroRates.date,</span><br><span class="line">      currency: key,</span><br><span class="line">      euros: current[key]</span><br><span class="line">    &#125;));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Atención a los métodos <code>subscribe()</code>. Aunque vayan vacíos son imprescindibles para que se ejecute la llamada.</p></blockquote><p>En la vista no hay gran cosa que hacer, salvo agregarle un botón para iniciar el proceso:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"Save Rates"</span> <span class="attr">type</span>=<span class="string">"button"</span> (<span class="attr">click</span>)=<span class="string">"postRates()"</span> /&gt;</span></span><br></pre></td></tr></table></figure><h2 id="1-4-Actualizacion-de-datos"><a href="#1-4-Actualizacion-de-datos" class="headerlink" title="1.4 Actualización de datos"></a>1.4 Actualización de datos</h2><p>Un par de ejemplo más para acabar de entender la mecánica básica de <code>HttpClient</code>. Podemos fijar el tipo de datos esperado en cualquier llamada. De hecho es recomendable que tengas un interfaz para cada respuesta esperada.</p><p>En este tutorial no se ha hecho y no quedamos con el <code>any</code>, pero al menos distinguimos entre objetos y arrays. Esto es lo que añado al <code>RatesComponent</code> para que muestre los datos guardados en mi API.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> RatesComponent <span class="keyword">implements</span> OnInit &#123;</span><br><span class="line"> <span class="keyword">private</span> myRatesApi</span><br><span class="line">  = <span class="string">'https://api-base.herokuapp.com/api/pub/rates'</span>;</span><br><span class="line"> <span class="keyword">public</span> myRates: <span class="built_in">any</span>[] = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">public</span> getMyRates() &#123;</span><br><span class="line">    <span class="keyword">this</span>.httpClient</span><br><span class="line">      .get&lt;<span class="built_in">any</span>[]&gt;(<span class="keyword">this</span>.myRatesApi)</span><br><span class="line">      .subscribe(<span class="function"><span class="params">apiResult</span> =&gt;</span> (<span class="keyword">this</span>.myRates = apiResult));</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Y en la vista, un nuevo botón y una nueva expresión.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"Refresh"</span> <span class="attr">type</span>=<span class="string">"button"</span> (<span class="attr">click</span>)=<span class="string">"getMyRates()"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; myRates | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Por último, en plan repaso, un ejemplo de método para borrar.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> deleteMyRates() &#123;</span><br><span class="line">  <span class="keyword">this</span>.httpClient</span><br><span class="line">    .delete(<span class="keyword">this</span>.myRatesApi)</span><br><span class="line">    .subscribe();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Y su botón en en la vista.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">value</span>=<span class="string">"Delete Rates"</span> <span class="attr">type</span>=<span class="string">"button"</span> (<span class="attr">click</span>)=<span class="string">"deleteMyRates()"</span> /&gt;</span></span><br></pre></td></tr></table></figure><p>Y hasta aquí lo básico de comunicaciones <em>http</em>. ¿Fácil verdad?. Pero la vida real raramente es tan sencilla. Si quieres enfrentarte a algo más duro debes prepararte y dominar los observables <em>RxJS</em>.</p><p>Lo que viene a partir de ahora requerirá tiempo y concentración. Si continúas adelante esto ya no será <em>your grandpa´s http anymore</em>.</p><h1 id="2-Observables"><a href="#2-Observables" class="headerlink" title="2 Observables"></a>2 Observables</h1><p>Las <strong>comunicaciones</strong> entre navegadores y servidores son varios órdenes de magnitud más lentas que las operaciones en memoria. Por tanto deben realizarse de manera asíncrona para garantizar una buena experiencia al usuario.</p><p>Esta experiencia no siempre fue tan buena para el programador. Sobre todo con las primeras comunicaciones <em>AJAX</em> basadas en el paso de funciones <em>callback</em>. La aparición de las <em>promises</em> mejoró la claridad del código, y ahora con los <em>Observables</em> tenemos además una gran potencia para manipular la <strong>información asíncrona</strong>.</p><blockquote><p>El patrón <code>Observable</code> fue implementado por Microsoft en la librería <a href="http://reactivex.io/intro.html" target="_blank" rel="noopener"><em>Reactive Extensions</em></a> más conocida como <code>RxJs</code>. El equipo de Angular decidió utilizarla para el desarrollo de las comunicaciones asíncronas. Esta extensa librería puede resultar intimidante en un primer vistazo. Pero con muy poco conocimiento puedes programar casi todas las funcionalidades que se te ocurran.</p></blockquote><p>Lo primero es importar el código, de forma similar a cualquier otra clase o función. Por ejemplo para empezar basta con <code>import { Observable } from &quot;rxjs/Observable&quot;;</code>. Tendremos la clase usada por angular para observar el respuesta <em>http</em>.</p><p>Pero esta es una clase genérica donde sus instancias admiten la manipulación interna de tipos más o menos concretos. Por eso ves en el ejemplo que algunas funciones retornan el tipo esperado <code>: Observable&lt;MyClass&gt;</code>, o si no saben que tipo esperar se conforman con <code>: Observable&lt;any&gt;</code>.</p><p>En cualquier caso, <strong>toda operación asíncrona retornará una instancia observable</strong> a la cual habrá que subscribirse para recibir los datos o los errores, cuando termine.<br>Aunque a veces no se verá el <em>subscribe</em>…</p><h2 id="2-1-Async"><a href="#2-1-Async" class="headerlink" title="2.1 Async"></a>2.1 Async</h2><p>Para probar otras formas de presentar datos recibidos desde un API, voy a crear un nuevo componente. El <code>ObseratesComponent</code>, mezcla de <em>observables</em> y <em>rates</em>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng g c 6-http/rates/obserates</span><br></pre></td></tr></table></figure><p>Y en su vista HTML usaré una función propia de Angular llamada <code>async</code>. Dicha función actúa como un <em>pipe</em> en una expresión. Igual que el <code>| json</code>. Pero a su izquierda espera que le den algo a lo que suscribirse; espera un observable.</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span> Currency Observable Rates. <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h3</span>&gt;</span> From Euro to the $ world <span class="tag">&lt;/<span class="name">h3</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; currentEuroRates$ | async | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span>&#125;</span><br></pre></td></tr></table></figure><p>En este caso uso la propiedad <code>currentEuroRates$</code> finalizada en <strong>$</strong> por convenio. Esa propiedad se rellena en el controlador con el método <code>get</code>, no con los datos futuros, si no con el propio <em>observable</em>.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> ratesApi</span><br><span class="line">  = <span class="string">'https://api.exchangeratesapi.io/latest'</span>;</span><br><span class="line"><span class="keyword">public</span> currentEuroRates$: Observable&lt;<span class="built_in">any</span>&gt; = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> httpClient: HttpClient</span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">ngOnInit() &#123;</span><br><span class="line">  <span class="keyword">this</span>.getCurrentEuroRates();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> getCurrentEuroRates() &#123;</span><br><span class="line">  <span class="keyword">const</span> currencies = <span class="string">'USD,GBP,CHF,JPY'</span>;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;this.ratesApi&#125;</span>?symbols=<span class="subst">$&#123;currencies&#125;</span>`</span>;</span><br><span class="line">  <span class="keyword">this</span>.currentEuroRates$ = <span class="keyword">this</span>.httpClient.get(url);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>Al utilizar el <em>pipe async</em> ya no es necesaria la suscripción en código. La propia función del framework se ocupa de ello. Por tanto la llamada se realiza igualmente aunque no veamos la suscripción.</p></blockquote><p>Esta es la manera recomendada de consumir datos desde un API. Definir la llamada en el controlador y pasarle el observable a la vista para que lo muestre cuando obtenga los datos.</p><h2 id="2-2-Pipe"><a href="#2-2-Pipe" class="headerlink" title="2.2 Pipe"></a>2.2 Pipe</h2><h3 id="Tuberias-en-RxJS-pipe"><a href="#Tuberias-en-RxJS-pipe" class="headerlink" title="Tuberías en RxJS .pipe()"></a>Tuberías en RxJS .pipe()</h3><p>Los datos devueltos raramente vienen en el formato preciso para usar en la vista. Con frecuencia hay que transformarlos al vuelo en cuanto se reciben. Recordemos que <strong><em>HttpClient</em> no devuelve los datos tal cual sino un <em>stream</em> de estados</strong> de dichos datos. La manipulación será sobre el <em>stream</em> no directamente sobre los datos; y, claro, para manipular un torrente hay que encauzarlo en tuberías.</p><p>Aquí es donde aparece el método <code>.pipe(operator1, operator2...)</code> aplicado a un observable. Suele hacerse en lugar, o antes, del <code>.susbcribe(okCallback, errCallback)</code>. Este método canaliza una serie de operadores predefinidos que manipulan el chorro de estados observados.</p><p>El operador más utilizado es <code>map(sourceStream =&gt; targetStream)</code>. Este operador recibe una función <em>callBack</em> que será invocada ante cada dato recibido. Esa función tienen que retornar un valor para sustituir al actual y así transformar el contenido del chorro.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> myRates$: Observable&lt;<span class="built_in">any</span>[]&gt; = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">private</span> getCurrentEuroRates() &#123;</span><br><span class="line">  <span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;this.ratesApi&#125;</span>?symbols=USD,GBP,CHF,JPY`</span>;</span><br><span class="line">  <span class="keyword">this</span>.currentEuroRates$ = <span class="keyword">this</span>.httpClient.get(url);</span><br><span class="line">  <span class="keyword">this</span>.myRates$ = <span class="keyword">this</span>.currentEuroRates$.pipe(map(<span class="keyword">this</span>.transformData));</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">private</span> transformData(currentRates) &#123;</span><br><span class="line">  <span class="keyword">const</span> current = currentRates.rates;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Object</span>.keys(current).map(<span class="function"><span class="params">key</span> =&gt;</span> (&#123;</span><br><span class="line">    date: currentRates.date,</span><br><span class="line">    currency: key,</span><br><span class="line">    euros: current[key]</span><br><span class="line">  &#125;));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>En este ejemplo partimos de nuevo de un objeto recibido y lo queremos ver como un <em>array</em> de objetos. Para ello lo transformamos usado el operador <code>map</code>. Este operador ha de importarse de <code>rxjs/operators</code> y aplicarse a un observable dentro de su método <code>.pipe()</code>. Es el más sencillo y uno de los más utilizados: recibe y emite datos dentro de un stream de eventos observables. Nada que ver, salvo el nombre, con la sencilla función <code>array.map(callback)</code>, que recibe y devuelve datos estáticos.</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">pre</span>&gt;</span>&#123;&#123; myRates$ | async | json &#125;&#125;<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure><p>Por lo demás el consumo se hace igual… pero… tendremos que ver más operadores para solucionar algunos inconvenientes.</p><h2 id="2-3-Operators"><a href="#2-3-Operators" class="headerlink" title="2.3 Operators"></a>2.3 Operators</h2><p>El código anterior funciona, pero resulta que al haber dos funciones async suscritas provoca que la llamada original se realice dos veces. esto es así porque el segundo observable <code>myRates$</code> es una canalización del primero <code>currentEuroRates$</code>.</p><p>Estos y oros problemas se solucionan usando operadores. Vamos a conocer un par de ellos más y veremos como <code>pipe(op1, op2, opn)</code> los ejecuta a todos en orden.</p><p>El operador <code>share()</code> permite compartir el resultado de una primera llamada con subsiguientes suscriptores. Evitando de ese modo la repetición de costosas peticiones http.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> getCurrentEuroRates() &#123;</span><br><span class="line"><span class="keyword">const</span> url = <span class="string">`<span class="subst">$&#123;this.ratesApi&#125;</span>?symbols=USD,GBP,CHF,JPY`</span>;</span><br><span class="line">  <span class="keyword">this</span>.currentEuroRates$ = <span class="keyword">this</span>.httpClient.get(url)</span><br><span class="line">      .pipe(share());</span><br><span class="line">  <span class="keyword">this</span>.myRates$ = <span class="keyword">this</span>.currentEuroRates$</span><br><span class="line">      .pipe(</span><br><span class="line">        tap(<span class="function"><span class="params">d</span>=&gt;</span><span class="built_in">console</span>.log(d)),</span><br><span class="line">        map(<span class="keyword">this</span>.transformData),</span><br><span class="line">        tap(<span class="function"><span class="params">t</span>=&gt;</span><span class="built_in">console</span>.log(t))</span><br><span class="line">      );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>El operador <code>tap(callback)</code> es similar en nombre al <code>map()</code>. Pero la gran diferencia es que está pensado para no manipular los datos que recibe. Los usa y puede causar otros efectos colaterales, pero nunca modifica el propio stream. Es muy utilizado para inspeccionar o auditar el flujo de otros operadores.</p></blockquote><p>Reconozco que en un primer vistazo este código pueda resultar complejo. Tómate tu tiempo. Fíjate en los datos de entrada y salida de cada función. Esto es solo el principio del trabajo con la librería <em>RxJS</em> y la manipulación de <em>streams de eventos observables</em>.</p><h1 id="3-Interceptores"><a href="#3-Interceptores" class="headerlink" title="3. Interceptores"></a>3. Interceptores</h1><p>Los interceptores tienen un nombre intimidante pero un propósito sencillo y muy útil: <strong>interceptar todas las comunicaciones http</strong> y ejecutar código personalizado para cada uno. Por ejemplo un gestor centralizado de errores http o el control de los tokens de seguridad de la aplicación.</p><p>Pero antes de eso habrá que aprender unos conceptos básicos. Vamos a ver un ejemplo sencillo que audite todas las llamadas http. Todo empieza con un servicio:</p><figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ng g s rates/AuditInterceptor</span><br></pre></td></tr></table></figure><h2 id="3-1-La-interfaz-HttpInterceptor"><a href="#3-1-La-interfaz-HttpInterceptor" class="headerlink" title="3.1 La interfaz HttpInterceptor"></a>3.1 La interfaz HttpInterceptor</h2><p>Al servicio genérico recién creado hay que hacerle cumplir una interfaz <code>HttpInterceptor</code> que viene con <code>HttpClientModule</code>. Esta interfaz solo necesita un método, el <code>intercept(req, next)</code> pero sus tipos e implementación mínima la hacen complicada de entender a la primera.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; HttpEvent, HttpHandler, HttpInterceptor, HttpRequest &#125;</span><br><span class="line">  <span class="keyword">from</span> <span class="string">'@angular/common/http'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Injectable &#125; <span class="keyword">from</span> <span class="string">'@angular/core'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; Observable &#125; <span class="keyword">from</span> <span class="string">'rxjs'</span>;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Injectable</span>(&#123;</span><br><span class="line">  providedIn: <span class="string">'root'</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AuditInterceptorService <span class="keyword">implements</span> HttpInterceptor &#123;</span><br><span class="line">  <span class="keyword">public</span> intercept( req: HttpRequest&lt;<span class="built_in">any</span>&gt;, next: HttpHandler )</span><br><span class="line">    : Observable&lt;HttpEvent&lt;<span class="built_in">any</span>&gt;&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> next.handle(req);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>Todo este código para nada. Porque eso es lo que hace, nada. Eso sí, tampoco rompe ni bloquea nada. Vayamos por partes, primero los parámetros, luego el tipo de la respuesta y por último la implementación</p><ul><li><code>req: HttpRequest&lt;any&gt;</code> puntero a la petición en curso</li><li><code>next: HttpHandler</code> puntero a la siguiente función que maneje la petición</li><li><code>: Observable&lt;HttpEvent&lt;any&gt;&gt;</code> retornamos un stream de eventos http para cada petición</li><li><code>return next.handle(req);</code> que el siguiente procese la petición, sin hacerle nada en absoluto</li></ul><blockquote><p>Para entenderlo mejor puede ser útil la siguiente analogía. Cuando usas httpClient.get() es como si pides algo a Amazon y te suscribes, es decir esperas el paquete. Pasado el tiempo el paquete llegará o no llegará, pero ya no lo gestionas tú. Con los interceptores es como si espiases cada proceso de tu pedido: stock, picking, packaging, shipping… Cada pedido es tratado en una sucesión de eventos. Con un interceptor observas !todos los eventos de todos los pedidos!</p></blockquote><h2 id="3-2-Inversion-del-control-via-token"><a href="#3-2-Inversion-del-control-via-token" class="headerlink" title="3.2 Inversión del control vía token"></a>3.2 Inversión del control vía token</h2><p>Tenemos un servicio que cumple una interfaz compleja. Pero dicho servicio debe ser proveído en algún módulo antes de ser reclamado como dependencias por alguien. Pero ¿por quién?</p><p>Técnicamente lo necesita el propio <code>HttpClient</code> del framework. Pero, obviamente, no pueden reclamar por tipo una clase que acabo de inventarme yo. Adelante con la <strong>inversión del control</strong>.</p><p>Realmente <code>HttpClient</code> depende de algo que por convenio llaman token de tipo <code>HTTP_INTERCEPTORS</code>. Nuestro trabajo consiste en que cuando reclame su dependencia, le demos la nuestra. El típico gato por liebre. Así en nuestro módulo pondremos la siguiente configuración.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">providers: [</span><br><span class="line">  &#123;</span><br><span class="line">    provide: HTTP_INTERCEPTORS,</span><br><span class="line">    useClass: AuditInterceptorService,</span><br><span class="line">    multi: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><p>El parámetro <code>multi:true</code> en este caso le indica que puede haber más de un interceptor. Concretamente debe añadirlo a la lista y admitir más. Hecho esto, sobraría el <code>providedIn: &#39;root&#39;</code> autogenerado en el decorador del servicio.</p><h2 id="3-3-Un-auditor-de-llamadas"><a href="#3-3-Un-auditor-de-llamadas" class="headerlink" title="3.3 Un auditor de llamadas"></a>3.3 Un auditor de llamadas</h2><p>Pues ya estamos listos para aportar algo de funcionalidad. Nuestro objetivo es escribir en el <em>log</em> un texto para cada llamada terminada y el tiempo que le tomó. La idea es aprovechar que todo es un <em>stream</em> observable y canalizarlo en una tubería con una serie de operadores.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">class</span> AuditInterceptorService <span class="keyword">implements</span> HttpInterceptor &#123;</span><br><span class="line">  <span class="keyword">constructor</span>(<span class="params"></span>) &#123;&#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> intercept(req: HttpRequest&lt;<span class="built_in">any</span>&gt;, next: HttpHandler)&#123;</span><br><span class="line">    <span class="keyword">const</span> started = <span class="built_in">Date</span>.now();</span><br><span class="line">    <span class="keyword">return</span> next.handle(req).pipe(</span><br><span class="line">      filter(<span class="function">(<span class="params">event: HttpEvent&lt;<span class="built_in">any</span>&gt;</span>) =&gt;</span> event <span class="keyword">instanceof</span> HttpResponse),</span><br><span class="line">      tap(<span class="function">(<span class="params">resp: HttpResponse&lt;<span class="built_in">any</span>&gt;</span>) =&gt;</span> <span class="keyword">this</span>.auditEvent(resp, started))</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> auditEvent(resp: HttpResponse&lt;<span class="built_in">any</span>&gt;, started: <span class="built_in">number</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> elapsedMs = <span class="built_in">Date</span>.now() - started;</span><br><span class="line">    <span class="keyword">const</span> eventMessage = resp.statusText + <span class="string">' on '</span> + resp.url;</span><br><span class="line">    <span class="keyword">const</span> message = eventMessage + <span class="string">' in '</span> + elapsedMs + <span class="string">'ms'</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>El operador <code>filter(any=&gt;bool)</code> se usa para descartar eventos que no cumplan unos criterios. En mi caso sólo me interesan los eventos de recepción de la petición, y no necesito los intermedios. Uso de nuevo el <code>tap(callback)</code> para hacer cosas con los datos sin modificarlos en absoluto. En este caso los envío al método <code>auditEvent</code> para que lo saque por consola. Listo: un auditor para todas las llamadas.</p><p>Ya tenemos el programa comunicado por <em>http</em> con un servidor; aunque por ahora de forma anónima y sin ninguna seguridad. Con el conocimiento actual de los observables, del <em>httpClient</em> y de los interceptores ya estamos cerca de resolverlo. Sigue esta serie para añadirle <a href="../vigilancia-y-seguridad-en-Angular/">vigilancia y seguridad en Angular</a> mientras aprendes a programar con Angular.</p><blockquote><p>Aprender, programar, disfrutar, repetir.<br>– <cite>Saludos, Alberto Basalo</cite></p></blockquote></div><footer class="article-footer"><div class="share-container"></div><a data-url="https://academia-binaria.com/comunicaciones-http-en-Angular/" data-id="cjbrwpvin001ziwd3551c6s4a" class="article-share-link"><i class="fa fa-share"></i>Compartir</a><script>!function(n){"undefined"!=typeof __SHARE_BUTTON_BINDED__&&__SHARE_BUTTON_BINDED__||(__SHARE_BUTTON_BINDED__=!0,n("body").on("click",function(){n(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(t){t.stopPropagation();var e,a=n(this),o=a.attr("data-url"),i=encodeURIComponent(o),r="article-share-box-"+a.attr("data-id"),s=a.offset();if(n("#"+r).length){if((e=n("#"+r)).hasClass("on"))return void e.removeClass("on")}else{var l=['<div id="'+r+'" class="article-share-box">','<input class="article-share-input" value="'+o+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+i+'" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+i+'" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+i+'" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+i+'" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");e=n(l),n("body").append(e)}n(".article-share-box.on").hide(),e.css({top:s.top+25,left:s.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){n(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script><a href="https://www.trainingit.es/curso-angular-basico/?promo=meetup10&af=abasalo">Curso Online Angular Basic</a></footer></div><nav id="article-nav"><a href="/vigilancia-y-seguridad-en-Angular/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Reciente</strong><div class="article-nav-title">Vigilancia y seguridad en Angular</div></a><a href="/servicios-inyectables-en-Angular/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Antiguo</strong><div class="article-nav-title">Servicios inyectables en Angular</div></a></nav></article></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Recientes</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/Material-Design-y-CLI-de-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-9_material.png)" alt="Material Design y CLI de Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/Material-Design-y-CLI-de-Angular/" class="title">Material Design y CLI de Angular</a></p><p class="item-date"><time datetime="2019-03-14T17:59:27.000Z" itemprop="datePublished">14-03-2019</time></p></div></li><li><div class="item-thumbnail"><a href="/formularios-reactivos-con-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-8_reactive.png)" alt="Formularios reactivos con Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/formularios-reactivos-con-Angular/" class="title">Formularios reactivos con Angular</a></p><p class="item-date"><time datetime="2019-03-12T09:59:27.000Z" itemprop="datePublished">12-03-2019</time></p></div></li><li><div class="item-thumbnail"><a href="/vigilancia-y-seguridad-en-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-7_watch.png)" alt="Vigilancia y seguridad en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/vigilancia-y-seguridad-en-Angular/" class="title">Vigilancia y seguridad en Angular</a></p><p class="item-date"><time datetime="2019-03-06T17:49:27.000Z" itemprop="datePublished">06-03-2019</time></p></div></li><li><div class="item-thumbnail"><a href="/comunicaciones-http-en-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-6_http.png)" alt="Comunicaciones http en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/comunicaciones-http-en-Angular/" class="title">Comunicaciones http en Angular</a></p><p class="item-date"><time datetime="2019-02-28T13:06:00.000Z" itemprop="datePublished">28-02-2019</time></p></div></li><li><div class="item-thumbnail"><a href="/servicios-inyectables-en-Angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_inject.png)" alt="Servicios inyectables en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/servicios-inyectables-en-Angular/" class="title">Servicios inyectables en Angular</a></p><p class="item-date"><time datetime="2019-02-15T08:54:58.000Z" itemprop="datePublished">15-02-2019</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Categorias</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Avanzado/">Avanzado</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Introduccion/">Introducción</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Opinion/">Opinión</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/">Tutorial</a><span class="category-list-count">14</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/Angular/">Angular</a><span class="category-list-count">14</span></li></ul></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Nube de etiquetas</h3><div class="widget tagcloud"><a href="/tag/Angular/" style="font-size:17.14px">Angular</a> <a href="/tag/Angular2/" style="font-size:20px">Angular2</a> <a href="/tag/Angular6/" style="font-size:14.29px">Angular6</a> <a href="/tag/Angular7/" style="font-size:17.14px">Angular7</a> <a href="/tag/AngularJS/" style="font-size:12.86px">AngularJS</a> <a href="/tag/Avanzado/" style="font-size:14.29px">Avanzado</a> <a href="/tag/BackEnd/" style="font-size:10px">BackEnd</a> <a href="/tag/Bootstrap/" style="font-size:11.43px">Bootstrap</a> <a href="/tag/CLI/" style="font-size:14.29px">CLI</a> <a href="/tag/ChangeDetection/" style="font-size:10px">ChangeDetection</a> <a href="/tag/Components/" style="font-size:10px">Components</a> <a href="/tag/DI/" style="font-size:11.43px">DI</a> <a href="/tag/Forms/" style="font-size:12.86px">Forms</a> <a href="/tag/FrontEnd/" style="font-size:10px">FrontEnd</a> <a href="/tag/Introduccion/" style="font-size:15.71px">Introducción</a> <a href="/tag/MongoDB/" style="font-size:11.43px">MongoDB</a> <a href="/tag/NgRx/" style="font-size:10px">NgRx</a> <a href="/tag/NodeJS/" style="font-size:14.29px">NodeJS</a> <a href="/tag/Observables/" style="font-size:11.43px">Observables</a> <a href="/tag/PWA/" style="font-size:10px">PWA</a> <a href="/tag/Redux/" style="font-size:10px">Redux</a> <a href="/tag/Routing/" style="font-size:10px">Routing</a> <a href="/tag/RxJS/" style="font-size:10px">RxJS</a> <a href="/tag/SPA/" style="font-size:11.43px">SPA</a> <a href="/tag/SSR/" style="font-size:10px">SSR</a> <a href="/tag/Servicios/" style="font-size:10px">Servicios</a> <a href="/tag/Tutorial/" style="font-size:18.57px">Tutorial</a> <a href="/tag/TypeScript/" style="font-size:10px">TypeScript</a> <a href="/tag/Universal/" style="font-size:10px">Universal</a> <a href="/tag/http/" style="font-size:12.86px">http</a> <a href="/tag/material/" style="font-size:10px">material</a> <a href="/tag/reactiveForms/" style="font-size:10px">reactiveForms</a></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">Links</h3><div class="widget"><ul><li><a href="https://www.trainingit.es/curso-angular-basico/?promo=meetup10&af=abasalo">Intro</a></li><li><a href="https://www.trainingit.es/curso-angular-alto-rendimiento/?promo=meetup10&af=abasalo">Avanzado</a></li><li><a href="https://www.trainingit.es/curso-typescript/?promo=meetup10&af=abasalo">TypeScript</a></li><li><a href="http://referral.pluralsight.com/mQe488E">PluralSight</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Archivos</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">marzo 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">febrero 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">enero 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">octubre 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">septiembre 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">marzo 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">septiembre 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">junio 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">mayo 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">abril 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">marzo 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">enero 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">noviembre 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">agosto 2015</a><span class="archive-list-count">4</span></li></ul></div></div><div id="toTop" class="fa fa-angle-up"></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2019 Developed by <a target="_blank" href="http://agorabinaria.com">Ágora Binaria</a>.</div></div></footer><script src="/js/main.js"></script><script src="//load.sumome.com/" data-sumo-site-id="24f3eb649e85fa1f7db20b7fa344f42f381f65f8f86f7028766c55d313e73eb5" async></script></div></body>