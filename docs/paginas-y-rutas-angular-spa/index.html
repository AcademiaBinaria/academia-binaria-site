<!DOCTYPE html><html lang="es"><head><meta charset="utf-8"><title>Páginas y rutas Angular SPA | Academia Binaria</title><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="description" content="Las aplicaciones Angular son conjuntos de páginas enrutadas en el propio navegador. Son las conocidas SPA, Single Page Applications. Estas apps liberan al servidor de una parte del trabajo, reducen la"><meta name="keywords" content="Angular,Angular5,SPA,Tutorial"><meta property="og:type" content="article"><meta property="og:title" content="Páginas y rutas Angular SPA"><meta property="og:url" content="http://academia-binaria.com/paginas-y-rutas-angular-spa/index.html"><meta property="og:site_name" content="Academia Binaria"><meta property="og:description" content="Las aplicaciones Angular son conjuntos de páginas enrutadas en el propio navegador. Son las conocidas SPA, Single Page Applications. Estas apps liberan al servidor de una parte del trabajo, reducen la"><meta property="og:locale" content="es"><meta property="og:image" content="http://academia-binaria.com/css/images/angular-5_2_SPA.jpg"><meta property="og:updated_time" content="2017-11-19T11:11:44.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Páginas y rutas Angular SPA"><meta name="twitter:description" content="Las aplicaciones Angular son conjuntos de páginas enrutadas en el propio navegador. Son las conocidas SPA, Single Page Applications. Estas apps liberan al servidor de una parte del trabajo, reducen la"><meta name="twitter:image" content="http://academia-binaria.com/css/images/angular-5_2_SPA.jpg"><link rel="alternate" href="http://eepurl.com/b3p7fb" title="Academia Binaria" type="application/atom+xml"><link rel="icon" href="/css/images/favicon.ico"><link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="/libs/open-sans/styles.css"><link rel="stylesheet" href="/libs/source-code-pro/styles.css"><link rel="stylesheet" href="/css/style.css"><script src="/libs/jquery/2.1.3/jquery.min.js"></script><link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css"><link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css"><script type="text/javascript">!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject="ga",e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script"),ga("create","UA-66674029-1","auto"),ga("send","pageview")</script></head></html><body><div id="container"><header id="header"><div id="header-main" class="header-inner"><div class="outer"><a href="/" id="logo"><i class="logo"></i> <span class="site-title">Academia Binaria</span></a><nav id="main-nav"><a class="main-nav-link" href="/archives">Archivos</a></nav><nav id="sub-nav"><div class="profile" id="profile-nav"><a id="profile-anchor" href="javascript:;"><img class="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8"> <i class="fa fa-caret-down"></i></a></div></nav><div id="search-form-wrap"><form class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"> <button type="submit" class="search-form-submit"></button></form><div class="ins-search"><div class="ins-search-mask"></div><div class="ins-search-container"><div class="ins-input-wrapper"><input type="text" class="ins-search-input" placeholder="escribe..."> <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span></div><div class="ins-section-wrapper"><div class="ins-section-container"></div></div></div></div><script>window.INSIGHT_CONFIG={TRANSLATION:{POSTS:"Entradas",PAGES:"Páginas",CATEGORIES:"Categorias",TAGS:"Etiquetas",UNTITLED:"(Untitled)"},ROOT_URL:"/",CONTENT_URL:"/content.json"}</script><script src="/js/insight.js"></script></div></div></div><div id="main-nav-mobile" class="header-sub header-inner"><table class="menu outer"><tr><td><a class="main-nav-link" href="/archives">Archivos</a></td><td><div class="search-form"><input type="text" class="ins-search-input search-form-input" placeholder="Buscar"></div></td></tr></table></div></header><div class="outer"><aside id="profile"><div class="inner profile-inner"><div class="base-info profile-block"><img id="avatar" src="https://www.gravatar.com/avatar/c6ea942080cef8be6ff80ca095e718b8?s=128"><h2 id="name">Alberto Basalo</h2><h3 id="title">Formador y Programador</h3><span id="location"><i class="fa fa-map-marker"></i>A Coruña, Spain</span> <a id="follow" target="_blank" href="https://twitter.com/albertobasalo">SEGUIR</a></div><div class="article-info profile-block"><div class="article-info-block"><a target="_blank" href="http://atlanticbootcamp.com">Atlantic</a></div><div class="article-info-block"><a target="_blank" href="http://agorabinaria.com">Ágora</a></div></div><div class="profile-block social-links"><table><tr><td><a href="https://github.com/AcademiaBinaria" target="_blank" title="github" class="tooltip"><i class="fa fa-github"></i></a></td><td><a href="https://twitter.com/albertobasalo" target="_blank" title="twitter" class="tooltip"><i class="fa fa-twitter"></i></a></td><td><a href="https://www.facebook.com/Agora.Binaria.SL/" target="_blank" title="facebook" class="tooltip"><i class="fa fa-facebook"></i></a></td><td><a href="http://eepurl.com/b3p7fb" target="_blank" title="rss" class="tooltip"><i class="fa fa-rss"></i></a></td></tr></table></div></div></aside><section id="main"><article id="post-paginas-y-rutas-angular-spa" class="article article-type-post" itemscope itemprop="blogPost"><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name">Páginas y rutas Angular SPA</h1><div class="article-meta"><div class="article-date"><i class="fa fa-calendar"></i> <a href="/paginas-y-rutas-angular-spa/"><time datetime="2017-11-13T16:19:14.000Z" itemprop="datePublished">13-11-2017</time></a></div><div class="article-category"><i class="fa fa-folder"></i> <a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></div><div class="article-tag"><i class="fa fa-tag"></i> <a class="tag-link" href="/tag/Angular/">Angular</a>, <a class="tag-link" href="/tag/Angular5/">Angular5</a>, <a class="tag-link" href="/tag/SPA/">SPA</a>, <a class="tag-link" href="/tag/Tutorial/">Tutorial</a></div></div></header><div class="article-entry" itemprop="articleBody"><p><img src="/images/tutorial-angular-5_2_SPA.png" alt="Tutorial Angular5 2-SPA"></p><p>Las <strong>aplicaciones Angular son conjuntos de páginas enrutadas</strong> en el propio navegador. Son las conocidas <em>SPA, Single Page Applications</em>. Estas apps liberan al servidor de una parte del trabajo, reducen la cantidad de llamadas y mejoran la percepción de velocidad del usuario.</p><p>Seguimos usando el concepto de árbol, ahora como analogía de <strong>las rutas y las vistas</strong> asociadas. Algo que se consigue fácilmente con <code>@angular/router</code> <strong>el enrutador de Angular</strong>.</p><a id="more"></a><p>Partiendo de la aplicación tal cómo quedó en <a href="../base-aplicacion-angular/">Base para una aplicación Angular</a>. Al finalizar tendrás un SPA con vistas asociadas a sus rutas.</p><blockquote><p>Código asociado a este artículo en <em>GitHub</em>: <a href="https://github.com/AcademiaBinaria/angular5/tree/master/2-spa/cash-flow" target="_blank" rel="external">AcademiaBinaria/angular5/2-spa</a></p></blockquote><h1 id="1-Rutas"><a href="#1-Rutas" class="headerlink" title="1. Rutas"></a>1. Rutas</h1><p>Al crear la aplicación hice uso del flag <code>routing true</code> en el comando de generación del <em>CLI</em>. Esto causó la aparición de no uno, sino dos módulos gemelos en la raíz de la aplicación. Has estudiado el <code>AppModule</code> verdadero módulo raíz, y ahora verás su gemelo: el <strong>módulo de enrutado</strong> ‘AppRoutingModule’.</p><h2 id="1-1-RouterModule"><a href="#1-1-RouterModule" class="headerlink" title="1.1 RouterModule"></a>1.1 RouterModule</h2><p>Este módulo cumple dos funciones. Por un lado <strong>importa al <code>RouterModule</code></strong> que contiene toda la lógica necesaria para enrutar en el navegador. Por otro lado, permite la <strong>definición de rutas</strong> en el array <code>Routes[]</code>.</p><blockquote><p>Por motivos estéticos he cambiado el nombre original del fichero <code>app-routing.module.ts</code> a <code>app.routing.ts</code> y así disponer de un icono propio en el tema <a href="https://marketplace.visualstudio.com/items?itemName=PKief.material-icon-theme" target="_blank" rel="external">Material Icon Theme</a>.</p></blockquote><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Routes, RouterModule &#125; <span class="keyword">from</span> <span class="string">"@angular/router"</span>;</div><div class="line"><span class="keyword">import</span> &#123; HomeComponent &#125; <span class="keyword">from</span> <span class="string">"./views/home/home.component"</span>;</div><div class="line"><span class="keyword">const</span> routes: Routes = [</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">""</span>,</div><div class="line">    component: HomeComponent</div><div class="line">  &#125;];</div><div class="line"><span class="meta">@NgModule</span>(&#123;</div><div class="line">  imports: [RouterModule.forRoot(routes)],</div><div class="line">  exports: [RouterModule]</div><div class="line">&#125;)</div><div class="line"><span class="keyword">export</span> <span class="keyword">class</span> AppRoutingModule &#123;&#125;</div></pre></td></tr></table></figure><p>El array de rutas recibe <strong>objetos con propiedades</strong> de configuración. La primera es <code>path:</code> en la que se especifica <strong>la dirección</strong> que resuelve, en este caso la ruta vacía o raíz del árbol de rutas. Otra propiedad fundamental es <code>component</code> la cual indica <strong>el componente</strong> que se debe mostrar cuando esta ruta se active.</p><p>En este caso he aprovechado el componente <code>HomeComponent</code> para asociarlo a la ruta raíz. Pero, ¿qué pasará con dicho componente? ¿dónde se cargará?. Presentamos a <code>&lt;router-outlet&gt;</code>.</p><h2 id="1-2-Router-Outlet"><a href="#1-2-Router-Outlet" class="headerlink" title="1.2 Router Outlet"></a>1.2 Router Outlet</h2><p>La idea general de <strong>una SPA es tener una única página que cargue dinámicamente otras vistas</strong>. Normalmente la página contenedora mantiene el menú de navegación, el pie de página y otras áreas comunes. Y deja un espacio para la carga dinámica. Para ello necesitamos saber <strong>qué componente cargar y dónde mostrarlo</strong>. De esto último se ocupa la etiqueta <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code>.</p><p>En el <code>app.component.ts</code> había un reclamo directo al componente <code>cf-home</code>. Para hacerlo dinámico se sustituye por <code>&lt;router-outlet&gt;&lt;/router-outlet&gt;</code> quedando algo así:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">selector: <span class="string">"cf-root"</span>,</div><div class="line">template: <span class="string">`</span></div><div class="line"><span class="string">  &lt;cf-nav&gt;&lt;/cf-nav&gt;</span></div><div class="line"><span class="string">  &lt;router-outlet&gt;&lt;/router-outlet&gt;</span></div><div class="line"><span class="string">  &lt;cf-footer&gt;&lt;/cf-footer&gt;</span></div><div class="line"><span class="string">`</span></div><div class="line">styles: []</div></pre></td></tr></table></figure><blockquote><p>Puedes ver los cambios realizados en <a href="https://github.com/AcademiaBinaria/angular5/commit/a0ae9077ea2a74e8683de8b281147661b7a9f508" target="_blank" rel="external">este <em>commit</em></a></p></blockquote><h2 id="1-3-Router-Redirect"><a href="#1-3-Router-Redirect" class="headerlink" title="1.3 Router Redirect"></a>1.3 Router Redirect</h2><p>La configuración de rutas no sólo permite asignar componentes a las direcciones. También se pueden hacer <strong>redirecciones de unas direcciones a otras</strong>. Y por supuesto puede haber <strong>rutas no contempladas o errores</strong> por parte del usuario, los infames <code>404 Not Found</code>.</p><p>Un ejemplo de ambas situaciones sería configurar nuestras rutas de forma que toda ruta desconocida nos lleve a otra general que muestre un mensaje predeterminado. Para hacerlo genera un módulo y un componente llamados <code>NotFound</code> con los siguientes comandos:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ng g m views/not-found</div><div class="line">ng g c views/not-found/not-found --export --flat</div></pre></td></tr></table></figure><p>Vuelve al módulo de enrutado, ahora conocido como <code>app.routing.ts</code>, y agrega dos nuevas entradas al array <code>routes</code>.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> routes: Routes = [</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">""</span>,</div><div class="line">    component: HomeComponent</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">"404"</span>,</div><div class="line">    component: NotFoundComponent</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">"**"</span>,</div><div class="line">    redirectTo: <span class="string">"/404"</span></div><div class="line">  &#125;</div><div class="line">  ];</div></pre></td></tr></table></figure><p>La entrada interesante es la última. Su dirección <code>path: &quot;**&quot;</code> indica que es cualquier ruta que no haya sido resuelta previamente. Un <em>not found</em> de toda la vida. En este caso lo redirijo a una ruta existente: <code>/404</code>. Y a esta última se le asocia un componente concreto, el <code>NotFoundComponent</code>.</p><h2 id="1-4-Router-Link"><a href="#1-4-Router-Link" class="headerlink" title="1.4 Router Link"></a>1.4 Router Link</h2><p>Los enlaces web tradicionalmente se han resuelto con elementos <code>&lt;a href=&quot;&quot;&gt;&lt;/a&gt;</code> dónde en su atributo <code>href</code> se asociaba la dirección a la cuál navegar ante el click del usuario. <strong>En Angular los enlaces se declaran con un atributo</strong> especial llamado <code>routerLink</code>. Este atributo <strong>se compila dando lugar al <code>href</code></strong> oportuno.</p><p>En el fichero <code>not-found.component.ts</code> pon algo así:<br></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">selector: <span class="string">"cf-not-found"</span>,</div><div class="line">template: <span class="string">`</span></div><div class="line"><span class="string">  &lt;h1&gt;Not Found&lt;/h1&gt;</span></div><div class="line"><span class="string">  &lt;h2&gt;404&lt;/h2&gt;</span></div><div class="line"><span class="string">  &lt;a routerLink="/"&gt;Go home&lt;/a&gt;</span></div><div class="line"><span class="string">`</span>,</div><div class="line">styles: []</div></pre></td></tr></table></figure><p></p><blockquote><p>Por ahora la funcionalidad de <code>routerLink</code> no mejora en nada a <code>href</code>. Pero lo hará. Mientras tanto familiarízate con su sintaxis y… asegúrate de importar <code>RouterModule</code> en <code>not-found.module.ts</code>. Puedes ver los cambios realizados hasta ahora en <a href="https://github.com/AcademiaBinaria/angular5/commit/464a5f0fd5f8975157793b0a3c13d7f61f890fa5" target="_blank" rel="external">este <em>commit</em></a></p></blockquote><h1 id="2-Lazy-Loading"><a href="#2-Lazy-Loading" class="headerlink" title="2 Lazy Loading"></a>2 Lazy Loading</h1><p>Las <em>webs SPA</em> se crearon por una razón que casi acaba con ellas: <strong>la velocidad</strong>. Al realizar el enrutado en el cliente y querer evitar todos los viajes posibles hasta el servidor, se cargó a la única página web con todo el peso de la aplicación. Lo cual la hizo terriblemente lenta en la primera visita de cada usuario.</p><p>El <strong>impacto de la primera visita</strong> en una aplicación de intranet no suele ser un problema grave. Pero en internet esa visita puede ser la primera y la última. La solución viene de mano del concepto de <em>lazy loading</em> o carga perezosa. Consiste en diferir la carga de la lógica asociada a una dirección hasta el momento en que sea activada dicha ruta. De esa forma, <strong>una página no visitada es una página que no pesa</strong>. Y la carga inicial se hace mucho más liviana.</p><h2 id="2-1-Webpack-y-los-bundles-por-ruta"><a href="#2-1-Webpack-y-los-bundles-por-ruta" class="headerlink" title="2.1 Webpack y los bundles por ruta"></a>2.1 Webpack y los bundles por ruta</h2><p>Objetivo: adelgazar el peso del <em>bundle</em> principal. Para conseguirlo hay que configurar las rutas de forma que no sea necesario importar los componentes a mostrar. De otro modo <em>webpack</em> empaquetaría ese componente como algo necesario… y por tanto sería enviado al navegador en el <em>bundle</em> principal sin que sea seguro su uso. La solución que ofrecen el <em>cli</em> y <em>webpack</em> consiste en <strong>delegar la asignación del componente a otro módulo, pero sin importarlo</strong>.</p><p>He creado un una nueva vista para ser usada en una nueva dirección llamada <code>/operations</code>. El componente se llama <code>OperationsComponent</code> y se ha <strong>declarado pero no exportado</strong> en el módulo <code>OperationsModule</code>.</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ng g m views/operations --routing true</div><div class="line">ng g c views/operations/operations --flat</div></pre></td></tr></table></figure><p>Este módulo no debe ser importado por el <code>AppModule</code>. Simplemente debe usarse su ruta relativa en el módulo de enrutado <code>AppRoutingModule</code> como un valor especial. Fíjate que <strong>la dirección del fichero es una cadena de texto</strong> asignada a una nueva propiedad de objeto route, la propiedad <code>loadChildren:&quot;&quot;</code>. No se está produciendo ninguna importación en <em>TypeScript</em> como ocurre con los componentes <code>HomeComponent</code> y <code>NotFoundComponent</code>.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">const</span> routes: Routes = [</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">""</span>,</div><div class="line">    component: HomeComponent</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">"operations"</span>,</div><div class="line">    loadChildren: <span class="string">"./views/operations/operations.module#OperationsModule"</span></div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">"404"</span>,</div><div class="line">    component: NotFoundComponent</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">"**"</span>,</div><div class="line">    redirectTo: <span class="string">"/404"</span></div><div class="line">  &#125;</div><div class="line">  ];</div></pre></td></tr></table></figure><p>Con esta información <em>webpack</em> va a generar un <em>bundle</em> específico para este módulo. Si durante la ejecución se activa la ruta <code>/operations</code> entonces descarga ese paquete y ejecuta su contenido. Mientras tanto, se queda almacenado en el servidor.</p><h2 id="2-2-El-enrutador-delegado"><a href="#2-2-El-enrutador-delegado" class="headerlink" title="2.2 El enrutador delegado"></a>2.2 El enrutador delegado</h2><p>Ya sabemos que hasta que no se active la ruta <code>/operations</code> no hay que hacer nada. Pero si se activa, entonces se descarga un <em>bundle</em> que contiene un módulo y los componentes necesarios. Sólo falta escoger dentro de ese módulo el componente que se asignará a la ruta.</p><p>Para eso al crear el módulo de operaciones usé el <em>flag</em> <code>routing true</code>. Esto hace que se genere un segundo módulo de enrutado. El <code>OperationsRoutingModule</code> prácticamente idéntico al enrutador raíz. Digamos que es <strong>un enrutador subordinado</strong> al primero. Sólo se llega aquí si en la ruta principal se ha navegado a una dirección concreta. A este nivel la dirección <code>path: &quot;&quot;</code> se agrega al <code>path: &quot;operations&quot;</code> de su enrutador padre.</p><p>La ventaja real de este segundo enrutador es que irá empaquetado en el mismo <em>bundle</em> que el módulo de negocio y sus componentes. Aquí sí que asignaremos un componente concreto: el <code>OperationsComponent</code>. Dejando el fichero <code>operations.routing.ts</code> más o menos así:</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; OperationsComponent &#125; <span class="keyword">from</span> <span class="string">"./operations.component"</span>;</div><div class="line"><span class="keyword">const</span> routes: Routes = [</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">""</span>,</div><div class="line">    component: OperationsComponent</div><div class="line">  &#125;</div><div class="line">];</div></pre></td></tr></table></figure><blockquote><p>Puedes tener una idea general de los cambios realizados en <a href="https://github.com/AcademiaBinaria/angular5/commit/b3f79c3324561174e10a7f8fb2668d7dc3e610f1" target="_blank" rel="external">este <em>commit</em></a></p></blockquote><h1 id="3-Parametros"><a href="#3-Parametros" class="headerlink" title="3 Parámetros"></a>3 Parámetros</h1><p>Las rutas vistas hasta ahora se consideran estáticas pues se han definido usando constantes. Es muy habitual tener <strong>páginas con la misma estructura pero distintos contenidos</strong>. Un blog con sus posts, una tienda con sus productos… hay miles de ejemplos así.</p><p>Ese tipo de direcciones se consideran paramétricas, tienen unos segmentos estáticos y otros dinámicos. Estos últimos se definen con parámetros, algo así como <strong>variables dentro de la cadena de la ruta</strong>. Su sintaxis obliga a precederlas de dos puntos. Por ejemplo <code>countries/:country/cities/:city</code> resolvería rutas como <em>countries/usa/cities/new-york</em> o <em>countries/france/cities/paris</em>. Rellenando los parámetros <code>:country</code> y <code>:city</code> con los valores necesarios.</p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; OperationsComponent &#125; <span class="keyword">from</span> <span class="string">"./operations.component"</span>;</div><div class="line"><span class="keyword">const</span> routes: Routes = [</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">""</span>,</div><div class="line">    component: OperationsComponent</div><div class="line">  &#125;,</div><div class="line">  &#123;</div><div class="line">    path: <span class="string">":id"</span>,</div><div class="line">    component: ItemComponent</div><div class="line">  &#125;</div><div class="line">];</div></pre></td></tr></table></figure><p>Esta configuración resuelve las rutas <code>operations</code> y <code>operations/cualquier-cosa</code>. En la primera carga <code>OperationsComponent</code> y en los demás casos el <code>ItemComponent</code>.</p><blockquote><p>En la práctica que nos ocupa lo usaremos para ver el detalle de las operaciones económicas realizadas. Como por ahora no tenemos, he puesto de ejemplo algunos números bien conocidos.</p></blockquote><p>Para forzar los enlaces he creado un componente a modo de listado llamado <code>ListComponent</code>. La parte interesante de su <em>html</em> es:</p><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">routerLink</span>=<span class="string">"/operations/271"</span>&gt;</span>Number e<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">routerLink</span>=<span class="string">"/operations/314"</span>&gt;</span>Pi<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">routerLink</span>=<span class="string">"/operations/667"</span>&gt;</span>Gravitational Constant<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure><p>Aún más interesante es el componente que muestra cada elemento de la lista, el <code>ItemComponent</code>. En este caso fíjate cómo accede a la ruta, obtiene el valor del parámetro y lo usa para mostrarlo en la web.</p><p>Contenido del fichero <code>item.component.ts</code>:<br></p><figure class="highlight typescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> &#123; Component, OnInit &#125; <span class="keyword">from</span> <span class="string">"@angular/core"</span>;</div><div class="line"><span class="keyword">import</span> &#123; ActivatedRoute &#125; <span class="keyword">from</span> <span class="string">"@angular/router"</span>;</div><div class="line"><span class="meta">@Component</span>(&#123;</div><div class="line">  selector: <span class="string">"cf-item"</span>,</div><div class="line">  template: <span class="string">` &lt;h3&gt;&#123;&#123; _id &#125;&#125;&lt;/h3&gt;`</span></div><div class="line">&#125;)</div><div class="line"><span class="keyword">export</span> <span class="keyword">class</span> ItemComponent <span class="keyword">implements</span> OnInit &#123;</div><div class="line">  _id: <span class="built_in">any</span>;</div><div class="line">  <span class="keyword">constructor</span>(<span class="params"><span class="keyword">private</span> route: ActivatedRoute</span>) &#123;&#125;</div><div class="line">  ngOnInit() &#123;</div><div class="line">    <span class="keyword">this</span>._id = <span class="keyword">this</span>.route.snapshot.params[<span class="string">"id"</span>];</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure><p></p><h1 id="3-1-ActivatedRoute"><a href="#3-1-ActivatedRoute" class="headerlink" title="3.1 ActivatedRoute"></a>3.1 ActivatedRoute</h1><p>El framework <em>Angular</em> trae muchas librerías para facilitar la vida al programador. Sólo hay que saber dónde están y cómo pedirlas. Para ello volvemos a la tecnología escogida, <em>TypeScript</em>, que permite las <strong>importaciones y la inyección de dependencias</strong>.</p><p>La instrucción <code>import { ActivatedRoute } from &quot;@angular/router&quot;;</code> pone a disposición del programdor el código donde está definida la clase <code>ActivatedRoute</code>, pero no se instancia directamente. En su lugar, se usa como un argumento del constructor de la clase del componente. Ese constructor es invocado por <em>Angular</em>, el cual sabe cómo rellenar los argumentos que le pido. Es decir, sabe cómo inyectar instancias de las que dependo.</p><p>Una vez que me <strong>inyectan las dependencias en el constructor</strong> ya están listas para ser usadas como propiedades de la clase. <em>Mágia del TypeScript</em>. En concreto <code>this.route</code> me da acceso a métodos y propiedades para trabajar con la ruta activa y poder leer sus parámetros.</p><h1 id="3-2-Eventos-e-interfaces-en-TypeScript"><a href="#3-2-Eventos-e-interfaces-en-TypeScript" class="headerlink" title="3.2 Eventos e interfaces en TypeScript"></a>3.2 Eventos e interfaces en TypeScript</h1><p>El lenguaje <em>TypeScript</em> como superconjunto de <em>JavaScript</em> aporta técnicas de P.O.O. bien conocidas en lenguajes como <em>Java</em> o <em>C#</em>. Por ejemplo <strong>la herencia y los interfaces</strong>. Los diseñadores de <em>Angular</em> decidieron usar interfaces para implementar el <strong>ciclo de vida de los componentes</strong>. En lugar de lanzar eventos a los que subscribirse, te piden que implementes métodos de distintas interfaces. Esos métodos serán llamados cuando corresponda, como si fuesen subscripciones a eventos.</p><p>En este caso la <em>interfaz</em> <code>OnInit</code> obliga a implementar el método <code>ngOnInit()</code> el cual será invocado lo antes posible pero tras la completa construcción del componente. Asegurando así que el código que se ejecute en ese método tenga acceso a un componente completo y totalmente listo.</p><blockquote><p>En <a href="https://github.com/AcademiaBinaria/angular5/commit/0afd90532bcce9f95bca130838eb11d5a4a3b491" target="_blank" rel="external">este <em>commit</em></a> puedes ver los cambios necesarios para incluir parámetros en la aplicación.</p></blockquote><p>Con esto tendrás una aplicación SPA en <em>Angular</em>. Sigue esta serie para añadirle <a href="../formularios-tablas-y-modelos-de-datos-en-angular/">Formularios, tablas y modelos de datos en Angular</a> mientras aprendes a programar con Angular5.</p><blockquote><p>Aprender, programar, disfrutar, repetir.<br>– <cite>Saludos, Alberto Basalo</cite></p></blockquote></div><footer class="article-footer"><div class="share-container"></div><a data-url="http://academia-binaria.com/paginas-y-rutas-angular-spa/" data-id="cja18kicl001x2cjsllb9fbhv" class="article-share-link"><i class="fa fa-share"></i>Compartir</a><script>!function(t){"undefined"!=typeof __SHARE_BUTTON_BINDED__&&__SHARE_BUTTON_BINDED__||(__SHARE_BUTTON_BINDED__=!0,t("body").on("click",function(){t(".article-share-box.on").removeClass("on")}).on("click",".article-share-link",function(e){e.stopPropagation();var a,o=t(this),i=o.attr("data-url"),r=encodeURIComponent(i),s="article-share-box-"+o.attr("data-id"),l=o.offset();if(t("#"+s).length){if((a=t("#"+s)).hasClass("on"))return void a.removeClass("on")}else{var n=['<div id="'+s+'" class="article-share-box">','<input class="article-share-input" value="'+i+'">','<div class="article-share-links">','<a href="https://twitter.com/intent/tweet?url='+r+'" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>','<a href="https://www.facebook.com/sharer.php?u='+r+'" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>','<a href="http://pinterest.com/pin/create/button/?url='+r+'" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>','<a href="https://plus.google.com/share?url='+r+'" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',"</div>","</div>"].join("");a=t(n),t("body").append(a)}t(".article-share-box.on").hide(),a.css({top:l.top+25,left:l.left}).addClass("on")}).on("click",".article-share-box",function(t){t.stopPropagation()}).on("click",".article-share-box-input",function(){t(this).select()}).on("click",".article-share-box-link",function(t){t.preventDefault(),t.stopPropagation(),window.open(this.href,"article-share-box-window-"+Date.now(),"width=500,height=450")}))}(jQuery)</script><a href="http://academia-binaria.com/paginas-y-rutas-angular-spa/#comments" class="article-comment-link disqus-comment-count" data-disqus-url="http://academia-binaria.com/paginas-y-rutas-angular-spa/">Comentarios</a></footer></div><nav id="article-nav"><a href="/formularios-tablas-y-modelos-de-datos-en-angular/" id="article-nav-newer" class="article-nav-link-wrap"><strong class="article-nav-caption">Reciente</strong><div class="article-nav-title">Formularios, tablas y modelos de datos en Angular</div></a><a href="/base-aplicacion-angular/" id="article-nav-older" class="article-nav-link-wrap"><strong class="article-nav-caption">Antiguo</strong><div class="article-nav-title">Base para una aplicación Angular</div></a></nav></article><section id="comments"><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div></section></section><aside id="sidebar"><div class="widget-wrap"><h3 class="widget-title">Recientes</h3><div class="widget"><ul id="recent-post"><li><div class="item-thumbnail"><a href="/formularios-tablas-y-modelos-de-datos-en-angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_3_data.jpg)" alt="Formularios, tablas y modelos de datos en Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/formularios-tablas-y-modelos-de-datos-en-angular/" class="title">Formularios, tablas y modelos de datos en Angular</a></p><p class="item-date"><time datetime="2017-11-15T09:17:37.000Z" itemprop="datePublished">15-11-2017</time></p></div></li><li><div class="item-thumbnail"><a href="/paginas-y-rutas-angular-spa/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_2_SPA.jpg)" alt="Páginas y rutas Angular SPA" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/paginas-y-rutas-angular-spa/" class="title">Páginas y rutas Angular SPA</a></p><p class="item-date"><time datetime="2017-11-13T16:19:14.000Z" itemprop="datePublished">13-11-2017</time></p></div></li><li><div class="item-thumbnail"><a href="/base-aplicacion-angular/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_1_Base.jpg)" alt="Base para una aplicación Angular" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/base-aplicacion-angular/" class="title">Base para una aplicación Angular</a></p><p class="item-date"><time datetime="2017-11-09T10:09:46.000Z" itemprop="datePublished">09-11-2017</time></p></div></li><li><div class="item-thumbnail"><a href="/hola-angular-cli/" class="thumbnail"><span style="background-image:url(/css/images/angular-5_0_cli_1-5.jpg)" alt="Hola Angular CLI" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Tutorial/">Tutorial</a><i class="fa fa-angle-right"></i><a class="article-category-link" href="/categories/Tutorial/Angular/">Angular</a></p><p class="item-title"><a href="/hola-angular-cli/" class="title">Hola Angular CLI</a></p><p class="item-date"><time datetime="2017-11-07T12:38:42.000Z" itemprop="datePublished">07-11-2017</time></p></div></li><li><div class="item-thumbnail"><a href="/typescript-programa-en-el-front-igual-que-en-el-back/" class="thumbnail"><span style="background-image:url(/css/images/typescript.jpg)" alt="TypeScript, programa en el front igual que en el back" class="thumbnail-image"></span></a></div><div class="item-inner"><p class="item-category"><a class="article-category-link" href="/categories/Opinion/">Opinión</a></p><p class="item-title"><a href="/typescript-programa-en-el-front-igual-que-en-el-back/" class="title">TypeScript, programa en el front igual que en el back</a></p><p class="item-date"><time datetime="2017-03-14T18:02:11.000Z" itemprop="datePublished">14-03-2017</time></p></div></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Categorias</h3><div class="widget"><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Avanzado/">Avanzado</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Introduccion/">Introducción</a><span class="category-list-count">14</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Opinion/">Opinión</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/">Tutorial</a><span class="category-list-count">4</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Tutorial/Angular/">Angular</a><span class="category-list-count">4</span></li></ul></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Nube de etiquetas</h3><div class="widget tagcloud"><a href="/tag/Angular/" style="font-size:17.5px">Angular</a> <a href="/tag/Angular2/" style="font-size:20px">Angular2</a> <a href="/tag/Angular5/" style="font-size:17.5px">Angular5</a> <a href="/tag/AngularJS/" style="font-size:15px">AngularJS</a> <a href="/tag/BackEnd/" style="font-size:10px">BackEnd</a> <a href="/tag/Bootstrap/" style="font-size:12.5px">Bootstrap</a> <a href="/tag/CLI/" style="font-size:12.5px">CLI</a> <a href="/tag/Forms/" style="font-size:10px">Forms</a> <a href="/tag/FrontEnd/" style="font-size:10px">FrontEnd</a> <a href="/tag/MongoDB/" style="font-size:12.5px">MongoDB</a> <a href="/tag/NodeJS/" style="font-size:17.5px">NodeJS</a> <a href="/tag/SPA/" style="font-size:10px">SPA</a> <a href="/tag/Tutorial/" style="font-size:17.5px">Tutorial</a> <a href="/tag/TypeScript/" style="font-size:10px">TypeScript</a></div></div><div class="widget-wrap widget-list"><h3 class="widget-title">Links</h3><div class="widget"><ul><li><a href="http://atlanticbootcamp.com">Atlantic Bootcamp</a></li><li><a href="http://agorabinaria.com">Ágora Binaria</a></li></ul></div></div><div class="widget-wrap"><h3 class="widget-title">Archivos</h3><div class="widget"><ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">noviembre 2017</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">marzo 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">septiembre 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">junio 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">mayo 2016</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">abril 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">marzo 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">enero 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/11/">noviembre 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">agosto 2015</a><span class="archive-list-count">4</span></li></ul></div></div><div id="toTop" class="fa fa-angle-up"></div></aside></div><footer id="footer"><div class="outer"><div id="footer-info" class="inner">&copy; 2017 Developed by <a target="_blank" href="http://agorabinaria.com">Ágora Binaria</a>.</div></div></footer><script>var disqus_config=function(){this.page.url="http://academia-binaria.com/paginas-y-rutas-angular-spa/",this.page.identifier="paginas-y-rutas-angular-spa"};!function(){var a=document,i=a.createElement("script");i.src="//academiabinaria.disqus.com/embed.js",i.setAttribute("data-timestamp",+new Date),(a.head||a.body).appendChild(i)}()</script><script src="/libs/lightgallery/js/lightgallery.min.js"></script><script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script><script src="/libs/lightgallery/js/lg-pager.min.js"></script><script src="/libs/lightgallery/js/lg-autoplay.min.js"></script><script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script><script src="/libs/lightgallery/js/lg-zoom.min.js"></script><script src="/libs/lightgallery/js/lg-hash.min.js"></script><script src="/libs/lightgallery/js/lg-share.min.js"></script><script src="/libs/lightgallery/js/lg-video.min.js"></script><script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="/js/main.js"></script><script src="//load.sumome.com/" data-sumo-site-id="24f3eb649e85fa1f7db20b7fa344f42f381f65f8f86f7028766c55d313e73eb5" async></script></div></body>